<body>

</body>
<template name="header">
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">CSV Upload</a>
                </div>
                <ul class="nav navbar-nav pull-right">
                    <li class="active"><a href="/">Home</a></li>
                    <li><a href="/history">History</a></li>
                    <li>{{> loginButtons}}</li>
                </ul>
            </div>
        </nav>
</template>

<template name="readCSV">
    {{> header}}
    <div class="container">
        {{#if currentUser}}
            <div class="product-tab-block">
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="done"><a href="#Product-info" aria-controls="Product-info" role="tab" data-toggle="tab">Product Info<i><img src="images/checked.png" alt=""></i></a></li>
                    <li role="presentation" class="active"><a href="#Product-price" aria-controls="Product-price" role="tab" data-toggle="tab">Product Pricing</a></li>
                    <li role="presentation"><a href="#Imprint-data" aria-controls="Imprint-data" role="tab" data-toggle="tab">Imprint Data</a></li>
                    <li role="presentation"><a href="#Image" aria-controls="Image" role="tab" data-toggle="tab">Image</a></li>
                    <li role="presentation"><a href="#Shipping" aria-controls="Shipping" role="tab" data-toggle="tab">Shipping</a></li>
                    <li role="presentation"><a href="#Additional-charge" aria-controls="Additional-charge" role="tab" data-toggle="tab">Additional Charges</a></li>
                    <li role="presentation"><a href="#Variation-price" aria-controls="Variation-price" role="tab" data-toggle="tab">Variation Price</a></li>
                </ul>
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active">
                        <div id="upload-csv-zone">
                            <span class="dz-message">Drop files here or click to upload.<br/>
                                <small>(only csv files are valid.)</small>
                            </span>
                            <input type="file" id="csv-file" name="files" accept=".csv"/>
                        </div>
                        <!--<button type="submit" class="btn btn-primary btnReadCsv">Read</button>-->

                        
                        {{#if files.length}}
                            <div id="mapping">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label>System headers</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label>CSV header</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label>Data type</label>
                                        </div>
                                    </div>
                                </div>
                                {{#each headers}}
                                    {{#let rowIndex=@index col=column}}
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    {{#each headers}}
                                                        {{#if $eq rowIndex @index}}
                                                            <label id="dpdsysheader_{{rowIndex}}"  selected="selected">{{column}}</label>
                                                        {{/if}}
                                                    {{/each}}
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <select class="form-control" id="dpdcsvheader_{{rowIndex}}">
                                                        {{#each csvHeaders}}
                                                            {{#let self=this}}
                                                                {{#with csvHeaders=csvHeaders col=col}}
                                                                    {{#let dis=distance}}
                                                                        {{#if $eq self dis}}
                                                                            <option value="{{self}}" selected="selected">{{self}}</option>
                                                                        {{else}}
                                                                            <option value="{{self}}">{{self}}</option>
                                                                        {{/if}}
                                                                    {{/let}}
                                                                {{/with}}
                                                            {{/let}}
                                                        {{/each}}
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <select class="form-control" id="dpddatatype_{{rowIndex}}">
                                                        {{#each headers}}
                                                            {{#if $eq rowIndex @index}}
                                                                <option value="{{type}}" selected="selected">{{type}}</option>
                                                            {{else}}
                                                                <option value="{{type}}">{{type}}</option>
                                                            {{/if}}
                                                        {{/each}}
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    {{/let}}
                                {{/each}}
                                <div>
                                    <button id="btnPreview">Preview</button>
                                </div>
                            </div>
                            
                            <div id="preview" style="display: none;">
                                <div class="table-responsive col-md-12">
                                    {{> reactiveTable  class="table table-bordered table-hover" showNavigation='never' showFilter=false collection=previewRec }}
                                </div>
                                <div>
                                    <!--<button id="btnNext">Next</button>-->
                                    <button id="btnNext" class="progress-button" data-style="fill" data-horizontal="">
                                        <span class="content">Next</span>
                                        <span class="progress">
                                            <span class="progress-inner notransition" style="width: 0%; opacity: 1;"></span>
                                        </span>
                                    </button>
                                </div>
                            </div>
                            <!--<table  class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>
                                            File name
                                        </th>
                                        <th style="width: 150px;">
                                            Progress
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {{#each files}}
                                        <tr>
                                            <td>
                                                {{name}}
                                            </td>
                                            <td >
                                                <div class="progress">
                                                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                                                    aria-valuenow="{{progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{progress}}%">
                                                        {{progress}}%
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    {{/each}}
                                </tbody>
                            </table>-->
                        {{/if}}
                    </div>
                </div>
            </div>
        {{/if}}
     </div>
</template>