<body>

</body>
<template name="header">
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">CSV Upload</a>
                </div>
                <ul class="nav navbar-nav pull-right">
                    <li class="active"><a href="/">Home</a></li>
                    <li><a href="/history">History</a></li>
                    <li>{{> loginButtons}}</li>
                </ul>
            </div>
        </nav>
</template>

<template name="readCSV">
    {{> header}}
    <div class="container">
        {{#if currentUser}}
            <div id="upload-csv-zone">
                <span class="dz-message">Drop files here or click to upload.<br/>
                    <small>(only csv files are valid.)</small>
                </span>
                <input type="file" id="csv-file" name="files" accept=".csv" multiple/>
            </div>
            <!--<button type="submit" class="btn btn-primary btnReadCsv">Read</button>-->

            
            {{#if files.length}}
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label>System headers</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label>CSV header</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label>Data type</label>
                        </div>
                    </div>
                </div>
                {{#each headers}}
                    {{#let rowIndex=@index col=column}}
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <select class="form-control">
                                        {{#each headers}}
                                            {{#if $eq rowIndex @index}}
                                                <option selected="selected">{{column}}</option>
                                            {{else}}
                                                <option>{{column}}</option>
                                            {{/if}}
                                        {{/each}}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <select class="form-control">
                                        {{#each csvHeaders}}
                                            {{#let self=this}}
                                                {{#with csvHeaders=csvHeaders col=col}}
                                                    {{#let dis=distance}}
                                                        {{#if $eq self dis}}
                                                            <option selected="selected">{{self}}</option>
                                                        {{else}}
                                                            <option>{{self}}</option>
                                                        {{/if}}
                                                    {{/let}}
                                                {{/with}}
                                            {{/let}}
                                        {{/each}}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <select class="form-control">
                                        {{#each headers}}
                                            {{#if $eq rowIndex @index}}
                                                <option selected="selected">{{type}}</option>
                                            {{else}}
                                                <option>{{type}}</option>
                                            {{/if}}
                                        {{/each}}
                                    </select>
                                </div>
                            </div>
                        </div>
                    {{/let}}
                {{/each}}
                <table  class="table table-bordered">
                    <thead>
                        <tr>
                            <th>
                                File name
                            </th>
                            <th style="width: 150px;">
                                Progress
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each files}}
                            <tr>
                                <td>
                                    {{name}}
                                </td>
                                <td >
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                                        aria-valuenow="{{progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{progress}}%">
                                            {{progress}}%
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        {{/each}}
                    </tbody>
                </table>
            {{/if}}
        {{/if}}
     </div>
</template>

<template name="mapping">
    
</template>