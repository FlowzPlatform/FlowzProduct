<body>

</body>
<template name="header">
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">CSV Upload</a>
                </div>
                <ul class="nav navbar-nav pull-right">
                    <li class="active"><a href="/">Home</a></li>
                    <li><a href="/history">History</a></li>
                    <li>{{> loginButtons}}</li>
                </ul>
            </div>
        </nav>
</template>

<template name="readCSV">
    {{> header}}
    <div class="container">
        {{#if currentUser}}
            <div class="product-file-upload-tab-block">
                <ul class="nav nav-tabs nav-tabs-vertical" role="tablist">
                    {{#each filetypes}}
                        <li role="presentation" class="{{#if isActive}}active{{/if}} {{#if isDone}}done{{/if}}"><a href="#"><i class="fa fa-check-circle-o"></i>{{name}}</a></li>
                    {{/each}}
                    
                    <!--<li role="presentation" class="active"><a href="#Product-price">Product Pricing</a></li>
                    <li role="presentation"><a href="#Imprint-data">Imprint Data</a></li>
                    <li role="presentation"><a href="#Image">Image</a></li>
                    <li role="presentation"><a href="#Shipping">Shipping</a></li>
                    <li role="presentation"><a href="#Additional-charge">Additional Charges</a></li>
                    <li role="presentation"><a href="#Variation-price">Variation Price</a></li>-->
                </ul>
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active">
                        <div id="upload-csv-zone">
                            <span class="dz-message">Drop files here or click to upload.<br/>
                                <small>(only csv files are valid.)</small>
                            </span>
                            <input type="file" id="csv-file" name="files" accept=".csv"/>
                        </div>
                        <!--<button type="submit" class="btn btn-primary btnReadCsv">Read</button>-->

                        
                        {{#if files.length}}
                            <div id="mapping">
                                <h3>Headers mapping</h3>
                                <table class="table table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th>System headers</th>
                                            <th>CSV header</th>
                                            <th>Data type</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {{#each headers}}
                                            <tr>
                                                {{#let rowIndex=@index col=column}}
                                                    <td>
                                                        {{#each headers}}
                                                            {{#if $eq rowIndex @index}}
                                                                <label id="dpdsysheader_{{rowIndex}}"  selected="selected">{{column}}</label>
                                                            {{/if}}
                                                        {{/each}}
                                                    </td>
                                                    <td>
                                                        <select class="form-control" id="dpdcsvheader_{{rowIndex}}">
                                                            {{#each csvHeaders}}
                                                                {{#let self=this}}
                                                                    {{#with csvHeaders=csvHeaders col=col}}
                                                                        {{#let dis=distance}}
                                                                            {{#if $eq self dis}}
                                                                                <option value="{{self}}" selected="selected">{{self}}</option>
                                                                            {{else}}
                                                                                <option value="{{self}}">{{self}}</option>
                                                                            {{/if}}
                                                                        {{/let}}
                                                                    {{/with}}
                                                                {{/let}}
                                                            {{/each}}
                                                        </select>
                                                    </td>
                                                    <td>
                                                        <select class="form-control" id="dpddatatype_{{rowIndex}}">
                                                            {{#each headers}}
                                                                {{#if $eq rowIndex @index}}
                                                                    <option value="{{type}}" selected="selected">{{type}}</option>
                                                                {{else}}
                                                                    <option value="{{type}}">{{type}}</option>
                                                                {{/if}}
                                                            {{/each}}
                                                        </select>
                                                    </td>
                                                {{/let}}
                                            </tr>
                                        {{/each}}
                                    </tbody>
                                </table>
                                <div class="row">
                                    <div class="col-md-12">
                                        <button class="progress-button pull-right" id="btnPreview" data-style="top-line" data-horizontal="">
                                        <span class="content">Generate previews</span>
                                        <span class="progress">
                                            <span class="progress-inner notransition" style="width: 0%; opacity: 1;"></span>
                                        </span>
                                    </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="preview" style="display: none;">
                                <h3>Headers mapping</h3>
                                <div class="row">
                                    <div class="table-responsive col-md-12" style="margin-bottom: 10px;border-right: 1px solid #ccc;">
                                        {{> reactiveTable  class="table table-bordered table-hover" showNavigation='never' showFilter=false collection=previewRec }}
                                    </div>
                                    <div>
                                        <!--<button id="btnNext">Next</button>-->
                                        <button id="btnNext" class="progress-button pull-right" data-style="top-line" data-horizontal="">
                                            <span class="content">Next</span>
                                            <span class="progress">
                                                <span class="progress-inner notransition" style="width: 0%; opacity: 1;"></span>
                                            </span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!--<table  class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>
                                            File name
                                        </th>
                                        <th style="width: 150px;">
                                            Progress
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {{#each files}}
                                        <tr>
                                            <td>
                                                {{name}}
                                            </td>
                                            <td >
                                                <div class="progress">
                                                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                                                    aria-valuenow="{{progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{progress}}%">
                                                        {{progress}}%
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    {{/each}}
                                </tbody>
                            </table>-->
                        {{/if}}
                    </div>
                </div>
            </div>
        {{/if}}
     </div>
</template>